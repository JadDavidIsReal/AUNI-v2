/* Auni - Visual Interface - Sentient Redesign */

/* ---------------------------------- */
/* GENERAL & LAYOUT                   */
/* ---------------------------------- */

:root {
    --brand-font: 'Segoe UI', 'Helvetica Neue', 'Roboto', 'Arial', sans-serif;
    --text-color: #f0f0f0;
    /* Final "Sentient" Palette */
    --aura-color-1: rgba(180, 220, 255, 0.05);
    --aura-color-2: rgba(200, 230, 255, 0.08);
    --particle-color: rgba(230, 245, 255, 0.9);
    --tendril-color: rgba(200, 230, 255, 0.5);
    --glow-color: rgba(180, 220, 255, 0.7);
}

html, body {
    margin: 0; padding: 0; width: 100%; height: 100%;
    background-color: #000000;
    color: var(--text-color);
    font-family: var(--brand-font);
    overflow: hidden;
}

body {
    display: flex;
    justify-content: center;
    align-items: center;
}

/* Header & Footer are positioned above the 3D context */
.auni-header, .settings-footer {
    position: absolute;
    padding: 2.5rem;
    z-index: 10;
}
.auni-header { top: 0; left: 0; }
.settings-footer { bottom: 0; right: 0; }
.auni-header h1 { font-size: 1.4rem; font-weight: 300; letter-spacing: 0.05em; margin: 0; opacity: 0.9; }
.settings-icon { width: 24px; height: 18px; display: flex; flex-direction: column; justify-content: space-between; cursor: pointer; transition: opacity 0.3s ease; }
.settings-icon span { display: block; width: 100%; height: 2px; background-color: var(--text-color); opacity: 0.7; transition: all 0.3s ease; }
.settings-icon:hover { opacity: 1; }
.settings-icon:hover span { background-color: #fff; }


/* ---------------------------------- */
/* ORB - SENTIENT REDESIGN            */
/* ---------------------------------- */

.orb-container {
    perspective: 1000px;
}

.orb {
    width: 20vw;
    height: 20vw;
    min-width: 250px;
    min-height: 250px;
    position: relative;
    transform-style: preserve-3d;
    animation: slow-pan 35s ease-in-out infinite alternate;
}

/* The Aura */
.aura {
    position: absolute;
    top: 0; left: 0;
    width: 100%; height: 100%;
    transform-style: preserve-3d;
}

.aura-layer {
    position: absolute;
    top: 50%; left: 50%;
    width: 100%; height: 100%;
    border-radius: 50%;
    box-shadow: inset 0 0 80px 20px var(--aura-color-1), inset 0 0 120px 40px var(--aura-color-2);
    animation: shimmer 12s ease-in-out infinite alternate;
}
.aura-layer:nth-child(2) {
    animation-name: shimmer-2;
    animation-duration: 15s;
    transform: rotateY(60deg) rotateX(20deg);
}
.aura-layer:nth-child(3) {
    animation-name: shimmer-3;
    animation-duration: 18s;
    transform: rotateY(-60deg) rotateX(-20deg);
}


/* The 3D Core */
.particle-system {
    position: absolute;
    width: 100%; height: 100%;
    transform-style: preserve-3d;
    animation: core-3d-rotation 40s linear infinite;
}

/* Particles */
.particle-system span {
    position: absolute;
    top: 50%; left: 50%;
    width: 3px; height: 3px;
    background: var(--particle-color);
    border-radius: 50%;
    box-shadow: 0 0 10px var(--particle-color);
    opacity: 0.8;
    animation: drift-3d 8s ease-in-out infinite alternate;
}

/* Thought Tendrils */
.tendril {
    position: absolute;
    top: 50%; left: 50%;
    width: 1px;
    height: 80px; /* Length of tendril */
    background: linear-gradient(to bottom, transparent, var(--tendril-color), transparent);
    opacity: 0;
    transform-origin: top;
}

/* ---------------------------------- */
/* SENTIENT KEYFRAMES                 */
/* ---------------------------------- */

@keyframes slow-pan {
    from { transform: rotateY(-15deg) rotateX(5deg); }
    to   { transform: rotateY(15deg) rotateX(-5deg); }
}

@keyframes core-3d-rotation {
    from { transform: rotate3d(1, 1, 1, 0deg); }
    to   { transform: rotate3d(1, 1, 1, 360deg); }
}

@keyframes shimmer {
    from { opacity: 0.8; filter: blur(5px); transform: scale(1); }
    to   { opacity: 0.6; filter: blur(10px); transform: scale(1.05); }
}
@keyframes shimmer-2 {
    from { opacity: 0.5; filter: blur(10px); }
    to   { opacity: 0.8; filter: blur(5px); }
}
@keyframes shimmer-3 {
    from { opacity: 0.7; transform: rotateY(-60deg) rotateX(-20deg) scale(1.05); }
    to   { opacity: 0.5; transform: rotateY(-50deg) rotateX(-15deg) scale(1); }
}

@keyframes drift-3d {
    from { transform: translate3d(var(--x-start), var(--y-start), var(--z-start)) scale(1); }
    to   { transform: translate3d(var(--x-end), var(--y-end), var(--z-end)) scale(0.8); }
}

@keyframes spark-tendril {
    0%, 100% { opacity: 0; transform: var(--transform-start) scaleY(0); }
    20% { opacity: 1; transform: var(--transform-start) scaleY(1); }
    80% { opacity: 1; transform: var(--transform-end) scaleY(1); }
    99% { opacity: 0; transform: var(--transform-end) scaleY(0); }
}

/* Assigning 3D positions to particles */
.particle-system span:nth-child(1) { --x-start: 0; --y-start: 0; --z-start: 80px; --x-end: 10px; --y-end: 20px; --z-end: 60px; animation-delay: -1s;}
.particle-system span:nth-child(2) { --x-start: 50px; --y-start: 50px; --z-start: 50px; --x-end: 40px; --y-end: 60px; --z-end: 30px; animation-delay: -2s;}
.particle-system span:nth-child(3) { --x-start: -60px; --y-start: 30px; --z-start: -40px; --x-end: -50px; --y-end: 20px; --z-end: -60px; animation-delay: -3s;}
/* ... add more for all particles ... */
.particle-system span:nth-child(10) { --x-start: 20px; --y-start: -70px; --z-start: 10px; --x-end: 30px; --y-end: -50px; --z-end: -10px; animation-delay: -10s;}


/* ---------------------------------- */
/* STATE-SPECIFIC ANIMATIONS          */
/* ---------------------------------- */

@keyframes focus-aura {
    from { transform: scale(1); opacity: 0.8; }
    to   { transform: scale(0.95); opacity: 1; }
}

@keyframes thinking-rotation {
    from { transform: rotate3d(1, 1, 1, 0deg); }
    to   { transform: rotate3d(3, -2, -1, 360deg); } /* More erratic rotation path */
}

/* IDLE STATE: Return to base animations */
.orb.orb--idle {
    animation: slow-pan 35s ease-in-out infinite alternate;
}
.orb.orb--idle .aura-layer {
    animation-name: shimmer; /* Ensure it's not focus-aura */
}

/* LISTENING STATE: Focused and attentive */
.orb.orb--listening {
    animation: none; /* Pause the slow-pan to show focus */
}
.orb.orb--listening .aura-layer {
    animation: focus-aura 4s ease-in-out infinite alternate;
}
.orb.orb--listening .particle-system {
    animation-duration: 60s; /* Slower, more deliberate rotation */
}
.orb.orb--listening .particle-system span {
    animation-duration: 5s; /* Slower, more observant drift */
    box-shadow: 0 0 15px #fff; /* Brighter particles */
}

/* THINKING STATE: Agitated and processing */
.orb.orb--thinking {
    animation: slow-pan 10s ease-in-out infinite alternate; /* More agitated pan */
}
.orb.orb--thinking .aura-layer {
    animation-duration: 1s; /* Agitated shimmer */
}
.orb.orb--thinking .particle-system {
    animation-name: thinking-rotation;
    animation-duration: 6s; /* Fast, erratic rotation */
}
.orb.orb--thinking .tendril {
    animation: spark-tendril 1.2s ease-out infinite;
    animation-delay: calc(var(--i) * 0.3s); /* Stagger tendril sparks */
}
.orb.orb--thinking .tendril:nth-child(1) { --i: 1; --transform-start: rotateY(45deg) rotateX(30deg); --transform-end: rotateY(90deg) rotateX(10deg); }
.orb.orb--thinking .tendril:nth-child(2) { --i: 2; --transform-start: rotateY(-60deg) rotateX(-20deg); --transform-end: rotateY(-120deg) rotateX(-40deg); }
.orb.orb--thinking .tendril:nth-child(3) { --i: 3; --transform-start: rotateY(150deg) rotateX(60deg); --transform-end: rotateY(20deg) rotateX(80deg); }


/* ---------------------------------- */
/* RESPONSIVENESS                     */
/* ---------------------------------- */

@media (max-width: 768px) {
    .orb { width: 40vw; height: 40vw; min-width: 200px; min-height: 200px; }
    .auni-header, .settings-footer { padding: 1.5rem; }
    .auni-header h1 { font-size: 1.2rem; }
}
